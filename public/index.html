<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>2sMXC Dashboard</title>
<style>
body { font-family: monospace; background:#222; color:#eee; }
h1 { color:#0f0; text-align:center; }
table { border-collapse: collapse; width: 80%; margin: 20px auto; }
td, th { border: 1px solid #0f0; padding: 8px; text-align:center; }
</style>
</head>
<body>
<h1>2sMXC Agent Dashboard</h1>
<p id="agent"></p>
<p id="ip"></p>
<table>
<thead>
<tr>
<th>Type</th><th>Port</th><th>Local</th><th>Status</th>
</tr>
</thead>
<tbody id="tunnels"></tbody>
</table>

<script>
const ws = new WebSocket("ws://localhost:3001");
ws.onmessage = e => {
    const data = JSON.parse(e.data);
    document.getElementById("agent").textContent = "Agent: " + data.agentName;
    document.getElementById("ip").textContent = "Resolved IP: " + data.resolvedIP;
    const tbody = document.getElementById("tunnels");
    tbody.innerHTML = "";
    data.tunnels.forEach(t => {
        const row = document.createElement("tr");
        row.innerHTML = `<td>${t.type}</td><td>${t.port}</td><td>${t.localHost}:${t.localPort}</td><td>${t.status}</td>`;
        tbody.appendChild(row);
    });
};
</script>
</body>
</html>
